<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>week show</title>
    <!-- including ECharts file -->
    <link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
          rel="external nofollow">
    <style type="text/css" scr="../static/css/quiltreview.css"></style>
    <style type="text/css" scr="../static/css/mertrics.css"></style>
    <script type="text/javascript" src="../static/js/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="../static/js/echarts.common.min.js"></script>
    <script type="text/javascript" src="../static/js/ajax.js"></script>
</head>
<body>    <!-- prepare a DOM container with width and height -->
<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<p> now</p>
<script type="text/javascript">
$.ajax({
        type: "post",
        async: true,            //异步请求（同步请求将会锁住浏览器，用户其他操作必须等待请求完成才可以执行）
        url: "/ajax/get_metrics/",    //请求发送到TestServlet处
        data: {"kernel": "e.g.lts2018"},
        dataType: "json",        //返回数据形式为json
        success: function (results) {
            result_data = results.Result
            //请求成功时执行该函数内容，result即为服务器返回的json对象
            if (result_data) {
                var data_dict = data_reduction(result_data);
                console.log('data_dict')
                console.log(data_dict)
                var result = data_durations(data_dict)
                //挨个取出类别并填入类别数组
                var week = result['week'];
                var week_num = []
                $.each(data_dict, function (k, v) {
                    var num_leg = v.length;
                    week_num.push(num_leg)
                })
                console.log(week_num)
                //myChart1.hideLoading();
                //resule = JSON.parse(resule);//把string字符串转换为json数组
            }
        },
        error: function (errorMsg) {
            //请求失败时执行该函数
            alert("图表请求数据失败!");
            myChart.hideLoading();
        }
    });
</script>
</body>
</html>