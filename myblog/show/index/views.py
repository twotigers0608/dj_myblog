from django.shortcuts import render
from django.views import View
from django.http import HttpResponse, JsonResponse
import json
from .models import Post
import time


# Create your views here.
def testshow(request):
    if request.method == "GET":
        kernels = ['all', 'lts2018', 'lts.4.14']

        context = {'kernels': kernels}
        return render(request, "metrics.html")


def ajax_get_data(request):
    if request.method == "POST":
        kernel = request.POST.get('kernel')
        # queried_weeks = request.POST.get('queried_weeks').strip()
        # get released patches of the certain kernel in the specified time window

        if kernel != 'lts2018':
            data = {"data": [
                {"rel_duration": 65.0, "released_time": 1562773699.0, "verify_duration": 0, "merge_duration": 39,
                 "total_duration": 59908.0, "review_duration": 59804, "id": 108050},
                {"rel_duration": 302.0, "released_time": 1563815620.0, "verify_duration": 0, "merge_duration": 57,
                 "total_duration": 254524.0, "review_duration": 254165, "id": 108692},
                {"rel_duration": 289.0, "released_time": 1563815620.0, "verify_duration": 0, "merge_duration": 1,
                 "total_duration": 254514.0, "review_duration": 254224, "id": 108693},
                {"rel_duration": 63.0, "released_time": 1564594307.0, "verify_duration": 0, "merge_duration": 3,
                 "total_duration": 82244.0, "review_duration": 82178, "id": 109213},
                {"rel_duration": 52.0, "released_time": 1564594307.0, "verify_duration": 0, "merge_duration": 1,
                 "total_duration": 82229.0, "review_duration": 82176, "id": 109214},
                {"rel_duration": 260477.0, "released_time": 1565026944.0, "verify_duration": 2313,
                 "merge_duration": 48216, "total_duration": 357778.0, "review_duration": 49085, "id": 109344},
                {"rel_duration": 260442.0, "released_time": 1565026944.0, "verify_duration": 0,
                 "merge_duration": 48274, "total_duration": 309385.0, "review_duration": 669, "id": 109384},
                {"rel_duration": 260442.0, "released_time": 1565026944.0, "verify_duration": 0,
                 "merge_duration": 48322, "total_duration": 309385.0, "review_duration": 621, "id": 109385},
                {"rel_duration": 43181.0, "released_time": 1565026944.0, "verify_duration": 7437,
                 "merge_duration": 12, "total_duration": 55770.0, "review_duration": 12577, "id": 109452},
                {"rel_duration": 43181.0, "released_time": 1565026944.0, "verify_duration": 7404,
                 "merge_duration": 15, "total_duration": 55770.0, "review_duration": 12574, "id": 109453},
                {"rel_duration": 113.0, "released_time": 1565195188.0, "verify_duration": 0, "merge_duration": 59,
                 "total_duration": 144624.0, "review_duration": 144452, "id": 109517},
                {"rel_duration": 94.0, "released_time": 1565195188.0, "verify_duration": 0, "merge_duration": 2,
                 "total_duration": 144594.0, "review_duration": 144498, "id": 109518},
                {"rel_duration": 34015.0, "released_time": 1565371094.0, "verify_duration": 7533, "merge_duration": 5,
                 "total_duration": 41750.0, "review_duration": 7730, "id": 109814},
                {"rel_duration": 32887.0, "released_time": 1565371094.0, "verify_duration": 7908, "merge_duration": 6,
                 "total_duration": 41682.0, "review_duration": 8789, "id": 109815},
                {"rel_duration": 32886.0, "released_time": 1565371094.0, "verify_duration": 7896, "merge_duration": 5,
                 "total_duration": 41674.0, "review_duration": 8783, "id": 109816},
                {"rel_duration": 28077.0, "released_time": 1565371094.0, "verify_duration": 0, "merge_duration": 115,
                 "total_duration": 41453.0, "review_duration": 13261, "id": 109817},
                {"rel_duration": 28079.0, "released_time": 1565371094.0, "verify_duration": 0, "merge_duration": 115,
                 "total_duration": 41450.0, "review_duration": 13256, "id": 109818},
                {"rel_duration": 28080.0, "released_time": 1565371094.0, "verify_duration": 0, "merge_duration": 115,
                 "total_duration": 41446.0, "review_duration": 13251, "id": 109819},
                {"rel_duration": 28087.0, "released_time": 1565371094.0, "verify_duration": 0, "merge_duration": 114,
                 "total_duration": 41443.0, "review_duration": 13242, "id": 109820},
                {"rel_duration": 28085.0, "released_time": 1565371094.0, "verify_duration": 0, "merge_duration": 114,
                 "total_duration": 41440.0, "review_duration": 13241, "id": 109821},
                {"rel_duration": 28111.0, "released_time": 1565371094.0, "verify_duration": 0, "merge_duration": 91,
                 "total_duration": 41436.0, "review_duration": 13234, "id": 109822},
                {"rel_duration": 28082.0, "released_time": 1565371094.0, "verify_duration": 0, "merge_duration": 114,
                 "total_duration": 41433.0, "review_duration": 13237, "id": 109823},
                {"rel_duration": 28083.0, "released_time": 1565371094.0, "verify_duration": 0, "merge_duration": 115,
                 "total_duration": 41430.0, "review_duration": 13232, "id": 109824},
                {"rel_duration": 46346.0, "released_time": 1565718753.0, "verify_duration": 493, "merge_duration": 44,
                 "total_duration": 122282.0, "review_duration": 75892, "id": 109969},
                {"rel_duration": 46342.0, "released_time": 1565718753.0, "verify_duration": 192, "merge_duration": 58,
                 "total_duration": 116382.0, "review_duration": 69982, "id": 109985},
                {"rel_duration": 46342.0, "released_time": 1565718753.0, "verify_duration": 206, "merge_duration": 60,
                 "total_duration": 116382.0, "review_duration": 69980, "id": 109986},
                {"rel_duration": 46342.0, "released_time": 1565718753.0, "verify_duration": 247, "merge_duration": 63,
                 "total_duration": 116382.0, "review_duration": 69977, "id": 109987},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 260502,
                 "merge_duration": 423, "total_duration": 553889.0, "review_duration": 513447, "id": 109838},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 261347,
                 "merge_duration": 429, "total_duration": 553889.0, "review_duration": 513441, "id": 109839},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 260783,
                 "merge_duration": 425, "total_duration": 553889.0, "review_duration": 513445, "id": 109840},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 261210,
                 "merge_duration": 427, "total_duration": 553889.0, "review_duration": 513443, "id": 109841},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 403436,
                 "merge_duration": 432, "total_duration": 553889.0, "review_duration": 513438, "id": 109842},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 403443,
                 "merge_duration": 430, "total_duration": 553889.0, "review_duration": 513440, "id": 109843},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 403932,
                 "merge_duration": 434, "total_duration": 553889.0, "review_duration": 513436, "id": 109844},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 403849,
                 "merge_duration": 433, "total_duration": 553889.0, "review_duration": 513437, "id": 109845},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 513761,
                 "merge_duration": 4, "total_duration": 553889.0, "review_duration": 513866, "id": 109846},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 403524,
                 "merge_duration": 417, "total_duration": 553889.0, "review_duration": 513453, "id": 109847},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 403526,
                 "merge_duration": 421, "total_duration": 553889.0, "review_duration": 513449, "id": 109848},
                {"rel_duration": 40019.0, "released_time": 1565891248.0, "verify_duration": 76024,
                 "merge_duration": 420, "total_duration": 128510.0, "review_duration": 88071, "id": 110138},
                {"rel_duration": 291.0, "released_time": 1565891248.0, "verify_duration": 0, "merge_duration": 61793,
                 "total_duration": 82667.0, "review_duration": 20583, "id": 110186},
                {"rel_duration": 62069.0, "released_time": 1565891248.0, "verify_duration": 0, "merge_duration": 2,
                 "total_duration": 82580.0, "review_duration": 20509, "id": 110187},
                {"rel_duration": 50109.0, "released_time": 1566581462.0, "verify_duration": 0, "merge_duration": 161,
                 "total_duration": 207317.0, "review_duration": 157047, "id": 110469},
                {"rel_duration": 50109.0, "released_time": 1566581462.0, "verify_duration": 0, "merge_duration": 165,
                 "total_duration": 207317.0, "review_duration": 157043, "id": 110470},
                {"rel_duration": 50109.0, "released_time": 1566581462.0, "verify_duration": 0, "merge_duration": 168,
                 "total_duration": 207317.0, "review_duration": 157040, "id": 110471},
                {"rel_duration": 50106.0, "released_time": 1566581462.0, "verify_duration": 0, "merge_duration": 180,
                 "total_duration": 206704.0, "review_duration": 156418, "id": 110474},
                {"rel_duration": 50104.0, "released_time": 1566581462.0, "verify_duration": 0, "merge_duration": 1130,
                 "total_duration": 206319.0, "review_duration": 155085, "id": 110475},
                {"rel_duration": 50456.0, "released_time": 1566581462.0, "verify_duration": 0, "merge_duration": 11,
                 "total_duration": 51621.0, "review_duration": 1154, "id": 110638},
                {"rel_duration": 91.0, "released_time": 1566924635.0, "verify_duration": 0, "merge_duration": 2,
                 "total_duration": 57193.0, "review_duration": 57100, "id": 110843},
                {"rel_duration": 81.0, "released_time": 1566924635.0, "verify_duration": 0, "merge_duration": 1,
                 "total_duration": 57134.0, "review_duration": 57052, "id": 110845},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 607018,
                 "merge_duration": 7464, "total_duration": 1151096.0, "review_duration": 1008636, "id": 110666},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 607796,
                 "merge_duration": 7462, "total_duration": 1151096.0, "review_duration": 1008638, "id": 110668},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 606496,
                 "merge_duration": 7460, "total_duration": 1151096.0, "review_duration": 1008640, "id": 110669},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 607917,
                 "merge_duration": 7457, "total_duration": 1151096.0, "review_duration": 1008643, "id": 110670},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 606397,
                 "merge_duration": 7454, "total_duration": 1151096.0, "review_duration": 1008646, "id": 110671},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 605999,
                 "merge_duration": 7452, "total_duration": 1151096.0, "review_duration": 1008648, "id": 110672},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 608983,
                 "merge_duration": 7449, "total_duration": 1151096.0, "review_duration": 1008651, "id": 110673},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 609566,
                 "merge_duration": 7447, "total_duration": 1151096.0, "review_duration": 1008653, "id": 110674},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 609719,
                 "merge_duration": 7445, "total_duration": 1151096.0, "review_duration": 1008655, "id": 110675},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 611785,
                 "merge_duration": 7442, "total_duration": 1151096.0, "review_duration": 1008658, "id": 110676},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 612279,
                 "merge_duration": 7440, "total_duration": 1151096.0, "review_duration": 1008660, "id": 110678},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 612384,
                 "merge_duration": 7438, "total_duration": 1151096.0, "review_duration": 1008662, "id": 110679},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 611456,
                 "merge_duration": 7435, "total_duration": 1151096.0, "review_duration": 1008665, "id": 110680},
                {"rel_duration": 134996.0, "released_time": 1567701556.0, "verify_duration": 611765,
                 "merge_duration": 7431, "total_duration": 1151096.0, "review_duration": 1008669, "id": 110681},
                {"rel_duration": 134067.0, "released_time": 1567701556.0, "verify_duration": 0,
                 "merge_duration": 93015, "total_duration": 816359.0, "review_duration": 589277, "id": 110895},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 333,
                 "total_duration": 815122.0, "review_duration": 680706, "id": 110901},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 300,
                 "total_duration": 815122.0, "review_duration": 680739, "id": 110902},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 225,
                 "total_duration": 815122.0, "review_duration": 680814, "id": 110904},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 210,
                 "total_duration": 815122.0, "review_duration": 680829, "id": 110905},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 196,
                 "total_duration": 815122.0, "review_duration": 680843, "id": 110906},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 152,
                 "total_duration": 815122.0, "review_duration": 680887, "id": 110907},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 140,
                 "total_duration": 815122.0, "review_duration": 680899, "id": 110908},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 131,
                 "total_duration": 815122.0, "review_duration": 680908, "id": 110909},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 118,
                 "total_duration": 815122.0, "review_duration": 680921, "id": 110910},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 108,
                 "total_duration": 815122.0, "review_duration": 680931, "id": 110911},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 96,
                 "total_duration": 815122.0, "review_duration": 680943, "id": 110912},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 84,
                 "total_duration": 815122.0, "review_duration": 680955, "id": 110914},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 73,
                 "total_duration": 815122.0, "review_duration": 680966, "id": 110915},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 60,
                 "total_duration": 815122.0, "review_duration": 680979, "id": 110916},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 50,
                 "total_duration": 815122.0, "review_duration": 680989, "id": 110917},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 41,
                 "total_duration": 815122.0, "review_duration": 680998, "id": 110918},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 32,
                 "total_duration": 815122.0, "review_duration": 681007, "id": 110919},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 23,
                 "total_duration": 815122.0, "review_duration": 681016, "id": 110920},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 12,
                 "total_duration": 815122.0, "review_duration": 681027, "id": 110921},
                {"rel_duration": 134083.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 2,
                 "total_duration": 815122.0, "review_duration": 681037, "id": 110922},
                {"rel_duration": 52887.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 173,
                 "total_duration": 91135.0, "review_duration": 38075, "id": 111399},
                {"rel_duration": 52894.0, "released_time": 1567701556.0, "verify_duration": 0, "merge_duration": 160,
                 "total_duration": 90704.0, "review_duration": 37650, "id": 111403},
                {"rel_duration": 91722.0, "released_time": 1568228569.0, "verify_duration": 0, "merge_duration": 4,
                 "total_duration": 91894.0, "review_duration": 168, "id": 111844},
                {"rel_duration": 73417.0, "released_time": 1568228569.0, "verify_duration": 0, "merge_duration": 2,
                 "total_duration": 73439.0, "review_duration": 20, "id": 111947},
                {"rel_duration": 60.0, "released_time": 1568228569.0, "verify_duration": 0, "merge_duration": 694,
                 "total_duration": 1092.0, "review_duration": 338, "id": 112302},
                {"rel_duration": 53920.0, "released_time": 1568653253.0, "verify_duration": 586641,
                 "merge_duration": 333530, "total_duration": 976668.0, "review_duration": 589218, "id": 111495},
                {"rel_duration": 53920.0, "released_time": 1568653253.0, "verify_duration": 107212,
                 "merge_duration": 125, "total_duration": 486168.0, "review_duration": 432123, "id": 112015},
                {"rel_duration": 54017.0, "released_time": 1568653253.0, "verify_duration": 93042,
                 "merge_duration": 333455, "total_duration": 482201.0, "review_duration": 94729, "id": 112022},
                {"rel_duration": 53951.0, "released_time": 1568653253.0, "verify_duration": 73473,
                 "merge_duration": 333497, "total_duration": 463497.0, "review_duration": 76049, "id": 112085},
                {"rel_duration": 17687.0, "released_time": 1568826480.0, "verify_duration": 5303, "merge_duration": 2,
                 "total_duration": 60663.0, "review_duration": 42974, "id": 112738},
                {"rel_duration": 17671.0, "released_time": 1568826480.0, "verify_duration": 4937, "merge_duration": 2,
                 "total_duration": 60604.0, "review_duration": 42931, "id": 112739},
                {"rel_duration": 31641.0, "released_time": 1568909241.0, "verify_duration": 349790,
                 "merge_duration": 108165, "total_duration": 509785.0, "review_duration": 369979, "id": 112561},
                {"rel_duration": 31639.0, "released_time": 1568909241.0, "verify_duration": 348678,
                 "merge_duration": 108174, "total_duration": 509732.0, "review_duration": 369919, "id": 112563},
                {"rel_duration": 62.0, "released_time": 1569887452.0, "verify_duration": 0, "merge_duration": 5,
                 "total_duration": 21345.0, "review_duration": 21278, "id": 113661},
                {"rel_duration": 84.0, "released_time": 1569887452.0, "verify_duration": 0, "merge_duration": 2,
                 "total_duration": 21271.0, "review_duration": 21185, "id": 113662},
                {"rel_duration": 75.0, "released_time": 1570123379.0, "verify_duration": 0, "merge_duration": 2,
                 "total_duration": 575488.0, "review_duration": 575411, "id": 113520},
                {"rel_duration": 29.0, "released_time": 1570123379.0, "verify_duration": 0, "merge_duration": 1,
                 "total_duration": 573904.0, "review_duration": 573874, "id": 113522},
                {"rel_duration": 195.0, "released_time": 1570123379.0, "verify_duration": 0, "merge_duration": 63937,
                 "total_duration": 123660.0, "review_duration": 59528, "id": 113750},
                {"rel_duration": 195.0, "released_time": 1570123379.0, "verify_duration": 0, "merge_duration": 4,
                 "total_duration": 123660.0, "review_duration": 123461, "id": 113751},
                {"rel_duration": 121.0, "released_time": 1570123379.0, "verify_duration": 0, "merge_duration": 2,
                 "total_duration": 39643.0, "review_duration": 39520, "id": 113802},
                {"rel_duration": 54.0, "released_time": 1570590355.0, "verify_duration": 9360, "merge_duration": 2,
                 "total_duration": 27108.0, "review_duration": 27052, "id": 114497},
                {"rel_duration": 64.0, "released_time": 1570590355.0, "verify_duration": 3816, "merge_duration": 3,
                 "total_duration": 21502.0, "review_duration": 21435, "id": 114632}]}
        else:
            data = {"data": [
                {"rel_duration": 65.0, "released_time": 1562773699.0, "verify_duration": 0, "merge_duration": 39,
                 "total_duration": 59908.0, "review_duration": 59804, "id": 108050},
                {"rel_duration": 302.0, "released_time": 1563815620.0, "verify_duration": 0, "merge_duration": 57,
                 "total_duration": 254524.0, "review_duration": 254165, "id": 108692},
                {"rel_duration": 289.0, "released_time": 1563815620.0, "verify_duration": 0, "merge_duration": 1,
                 "total_duration": 254514.0, "review_duration": 254224, "id": 108693},
                {"rel_duration": 63.0, "released_time": 1564594307.0, "verify_duration": 0, "merge_duration": 3,
                 "total_duration": 82244.0, "review_duration": 82178, "id": 109213},
                {"rel_duration": 52.0, "released_time": 1564594307.0, "verify_duration": 0, "merge_duration": 1,
                 "total_duration": 82229.0, "review_duration": 82176, "id": 109214},
            ]}
            time.sleep(1)
        return JsonResponse(data)


class Index(View):
    def get(self, request):
        # post_list = Post.objects.all().order_by('-create_time')
        # return render(request, "index1.html",context={'post_list':post_list})
        pass


class Article(View):
    def get(self, request):
        return render(request, "column1.html")


def test(request):
    if request.method == 'GET':
        return render(request, 'week1.html')
